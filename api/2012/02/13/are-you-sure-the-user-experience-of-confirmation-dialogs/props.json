{
  "dateUnix": 1329158792000,
  "dateFormatted": "Monday 13 Feb 2012",
  "pageHeading": "Are You Sure? The UX of Confirmations",
  "pagePath": "/2012/02/13/are-you-sure-the-user-experience-of-confirmation-dialogs/",
  "innerHTML": "<p>Imagine for a minute your web app has a “Delete” action. In HTML it takes this form:</p>\n<pre><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>delete<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Delete Item<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>The anchor is styled up with sexy CSS3 and functionality is implemented with an asynchronous JavaScript API call. Because we all care about accessibility (and standards) we provide a “no-JS” fallback:</p>\n<pre><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>delete<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/item/delete/1/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Delete Item<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Lovely! It’s great to build on top of what works. “Web apps” are still <em>websites</em>, after all.</p>\n<p>Now, I know what you’re thinking, “Delete” is a big commitment! What if the user triggers the link accidentally? What if the user has been conditioned through years of UI exposure to expect a modal window explaining the ramifications, or at least asking for confirmation? We could write a little script (jQuery, naturally) to hijack any element with the class “delete” and throw up a confirmation box. Similar to this:</p>\n<pre><code class=\"language-javascript\"><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a.delete'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Are you sure?'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Replace <code>confirm()</code> with your fancy dialog of choice. The function <code>[window.confirm](https://developer.mozilla.org/en/DOM/window.confirm)</code> provides a <strong>native</strong> dialog implemented by the browser. More on that later!</p>\n<p class=\"b-post__image\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==\" data-lazy=\"false\" data-src=\"/images/2012/02/macosx-confirm1.png\" alt=\"Browser confirm dialog in Mac OSX\"></p>\n<p>That’s quite nice but searching the whole DOM for links is fairly intensive. There will also be the initial delay of execution while we wait for the <code>DOMContentLoaded</code> event. Users will quick trigger fingers will be able to click “Delete” and see no confirmation request. We also have the issue of microcopy hardcoded in our script (not the best place for it). We could mess around with additional <code>data-*</code> attributes but I have a better idea…</p>\n<pre><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>delete<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/message/delete/1/<span class=\"token punctuation\">\"</span></span>\n   <span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>return confirm(<span class=\"token punctuation\">'</span>Are you sure?<span class=\"token punctuation\">'</span>)<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Delete Item<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Boom! No dependancies, no need to worry about fast fingers, and browser support dates back to <strong>Netscape</strong>. (<a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://www.w3.org/TR/html5/webappapis.html#event-handler-attributes\">Event handler attributes</a> like <code>onclick</code> are still a big part of HTML5, in case you were wondering.)</p>\n<p>This is perfect for our needs but as you’ve probably noticed the native confirm dialogs are ugly as hell. On mobile devices (see Android 4.0 and iOS below) the dialogs look slightly better in my opinion. More importantly though, <strong>they work!</strong> Have you ever tried building a custom modal dialog for mobile browsers? Good luck with that!</p>\n<p class=\"b-post__image\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==\" data-lazy=\"false\" data-src=\"/images/2012/02/mobile-confirm.png\" alt=\"Browser confirm dialog on Android 4.0 and iOS\"></p>\n<p><strong>Going native on mobile is undoubtedly the best experience</strong>. Even native mobile apps use native dialogs. Don’t even think about trying to implemented fixed positioning in a mobile web browser it will have you in tears (trust me). The question is: how do we go native on mobile, but provide a custom dialog design for desktop browsers like Chrome, while still gaining the benefits of inline event handlers? Check out the one I designed (based on TJ Holowaychuk’s <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://visionmedia.github.com/uikit/\">UIKit</a>):</p>\n<p class=\"b-post__image\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==\" data-lazy=\"false\" data-src=\"/images/2012/02/custom-confirm.png\" alt=\"Custom confirmation dialog\"></p>\n<p>To provide both native and custom dialogs through <code>confirm()</code> we need to override the function.</p>\n<p>Our problem is that the native dialog hangs the browser action in a way that we cannot. Any override we create for <code>window.confirm</code> must <code>return false</code> and then act asynchronously on later events. How can we do this when only a string is passed to the function?</p>\n<p>The <code>onclick</code> attribute basically creates an event handler like this:</p>\n<pre><code class=\"language-javascript\"><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Are you sure?'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Note the <code>event</code> parameter. We need to access this object (a <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://developer.mozilla.org/en/DOM/MouseEvent\">MouseEvent</a>) to obtain the original target element and go from there. We could pass it through like this:</p>\n<pre><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>a onclick<span class=\"token operator\">=</span><span class=\"token string\">\"return confirm('Are you sure?', event)\"</span><span class=\"token operator\">></span></code></pre>\n<p>The native version of <code>confirm</code> will ignore the second argument (JavaScript isn’t fussy). But that’s not very clean, and there is a better way! When we redefine <code>confirm</code> we can actually access this event object.</p>\n<pre><code class=\"language-javascript\">window<span class=\"token punctuation\">.</span>nativeConfirm <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>confirm<span class=\"token punctuation\">;</span>\nwindow<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">confirm</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> event <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>event <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>confirm<span class=\"token punctuation\">.</span>caller<span class=\"token punctuation\">.</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>First we check the <code>window</code> object, old Internet Explorer will find an event chillin’ there. Other browsers can access the function’s caller. If no event exists we just return <code>window.nativeConfirm(message);</code> and be done with it. If the event does exist — and we’ve established that the user experience will be improved with non-native dialogs — we get the target element, read the <code>href</code> attribute, pop open a custom dialog with a callback that redirects on success, and <code>return false</code> to cancel the default <code>onclick</code> action.</p>\n<p>My final implementation with extended functionality looks a little something like this:</p>\n<pre><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>return confirm(<span class=\"token punctuation\">'</span>Are you sure?<span class=\"token punctuation\">'</span>)<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/action/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Delete Item<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre><code class=\"language-javascript\">window<span class=\"token punctuation\">.</span>nativeConfirm <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>confirm<span class=\"token punctuation\">;</span>\nwindow<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">confirm</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// grab the event and target element (if they exist)</span>\n  <span class=\"token keyword\">var</span> e <span class=\"token operator\">=</span> event <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>event <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>confirm<span class=\"token punctuation\">.</span>caller<span class=\"token punctuation\">.</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> el <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>target <span class=\"token operator\">||</span> e<span class=\"token punctuation\">.</span>srcElement<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// go native if preferred, or no event/element</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">useNativeConfirm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>e <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>el<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">nativeConfirm</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// open custom dialog with callback function</span>\n  <span class=\"token function\">fancyConfirm</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">&amp;&amp;</span> el <span class=\"token operator\">&amp;&amp;</span> el<span class=\"token punctuation\">[</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href <span class=\"token operator\">=</span> el<span class=\"token punctuation\">[</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> callback <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// cancel onclick action</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>By including <code>useNativeConfirm()</code> we can do some feature detection and browser investigation to determine what type of dialog to display. <strong>For mobile browsers this is essential.</strong> I’m still thinking about the best way to make this decision but a <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://www.modernizr.com/docs/#mq\">Modernizr media query test</a> for small screens is a good start.</p>\n<p>To recap the benefits of this technique:</p>\n<ul>\n<li>Allows for native confirmation dialogs that are immediately present and supported by all browsers with no dependancies.</li>\n<li>Is easily implemented within the HTML.</li>\n<li>Has the ability to provide more attractive dialogs for browsers that can handle them while retaining native dialog use elsewhere (i.e. small screen/mobile).</li>\n</ul>\n<p>I’ll whip up an example soon. Any thoughts?</p>\n<p>Even if you don’t like the idea of redefining <code>window.confirm</code> or using event handler attributes, I’d still recommend avoiding custom dialogs on mobile devices.</p>\n",
  "pageExcerpt": "Imagine for a minute your web app has a “Delete” action. In HTML it takes this form:\n&lt;a class=\"delete\" href=\"#\">Delete Item&lt;/a>\nThe anchor is styled up with sexy CSS3 and functionality is implemented with an asynchronous JavaScript API call. Because we all care about accessibility (and standards) we provide a “no-JS” fallback:\n&lt;a class=\"delete\" href=\"/item/delete/1/\">Delete Item&lt;/a>\nLovely! It’s great […]",
  "pageTitle": "Are You Sure? The UX of Confirmations – David Bushell – Web Design (UK)"
}
{
  "dateUnix": 1360011944000,
  "dateFormatted": "Monday 4 Feb 2013",
  "pageHeading": "A Primer to Front-end SVG Hacking",
  "pagePath": "/2013/02/04/a-primer-to-front-end-svg-hacking/",
  "innerHTML": "<p>Using <a href=\"https://developer.mozilla.org/en/docs/SVG\">SVG</a> (Scalable Vector Graphics) on websites is a lot safer than many front-end developers think. Authoring aside — I wouldn’t suggest trying to hand-code an illustration more complex than a triangle* — the standard is well supported in browsers today and perfect for <a href=\"http://coding.smashingmagazine.com/2012/01/16/resolution-independence-with-svg/\">resolution independence</a> when CSS and icon fonts aren’t suitable.</p>\n<p class=\"p--small\"><em>* Quick fire question: at which corner does this right-angle triangle point?</em></p>\n\n\n\n<pre><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>polygon</span> <span class=\"token attr-name\">points</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0,100 0,0 100,0 <span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n</code></pre>\n<p>I’m going to walk you through many conceivable implementations:</p>\n<h2 id=\"image-elements\">Image Elements</h2>\n<p>Basic usage is as simple as swapping out a regular raster graphic — PNG, JPEG, or GIF — with an SVG file. Here’s an example in HTML:</p>\n<pre><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>image.svg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<p>According to the <a href=\"http://caniuse.com/#search=SVG\">can I use</a> compatibility table only Internet Explorer 8 and lower, and Android Browser 2 lack support. They will download and fail to render the image.</p>\n<p>With client side fallbacks we can’t avoid the initial download. We could swap out the element source with JavaScript if there’s an error:</p>\n<pre><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>image.svg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onerror</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>this.onerror=null; this.src=<span class=\"token punctuation\">'</span>image.png<span class=\"token punctuation\">'</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<p>That’s cute but I can’t imagine many circumstances where it would be the best solution. You can achieve similar results with feature detection:</p>\n<pre><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Modernizr<span class=\"token punctuation\">.</span>svg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img[src$=\".svg\"]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">each</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'src'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'src'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.svg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.png'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Ben Howdle</strong> and <strong>Jack Smith</strong> have written <a href=\"http://benhowdle.im/svgeezy/\">SVGeezy</a> that does this without Modernizr or jQuery dependencies. Though if you do include <a href=\"http://modernizr.com/\">Modernizr</a> detection in the <code>&lt;head&gt;</code> of your HTML document you can do a nicer — read: less noticeable — “switcheroo” with CSS.</p>\n<pre><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>logo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>logo.svg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<pre><code class=\"language-css\"><span class=\"token selector\">.lt-ie9 #logo,\n.no-svg #logo</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token url\">url(\"logo.png\")</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">_background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\">url(\"logo.gif\")</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.lt-ie9 #logo img,\n.no-svg #logo img</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">filter</span><span class=\"token punctuation\">:</span> <span class=\"token function\">alpha</span><span class=\"token punctuation\">(</span>opacity=0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>You’ll notice I’ve used the “lt-ie9” class. You can apply this to the <code>&lt;html&gt;</code> element using <a href=\"http://www.quirksmode.org/css/condcom.html\">conditional comments</a>. That provides an extra fail-safe if somehow JavaScript is disabled in old IE. Oh, and the <code>_background-image</code> and GIF — that’s an IE6 transparency fix! Totally optional.</p>\n<p>With the techniques above the worse case scenario is that two assets are downloaded. Eventually those legacy browsers will fade away and you can remove the fallbacks.</p>\n<h2 id=\"css-background-images\">CSS Background Images</h2>\n<p>Like I mentioned, you can use SVG anywhere images are permitted:</p>\n<pre><code class=\"language-css\"><span class=\"token selector\">.illustration</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\">url('image.svg')</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>And just like raster graphics, you can base64 encode them right into the stylesheet to help reduce HTTP requests:</p>\n<pre><code class=\"language-css\"><span class=\"token selector\">.illustration</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\">url('data:image/svg+xml;base64,[data]')</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>To aid readability you may even attempt such audacity as this:</p>\n<pre><code class=\"language-css\"><span class=\"token selector\">.illustration</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\">url('data:image/svg+xml;charset=utf-8,&lt;svg>&lt;/svg>')</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>I’ve thrown up a <a href=\"https://dbushell.com/demos/svg/utf8uri/test2.html\">UTF-8 test case</a> and the results from quick testing show only Webkit based Safari and Chrome are happy with this arrangement. But this isn’t quite right…</p>\n<p>It may not be immediately obvious but my pseudo code above is not a valid data URI. While the contents are UTF-8 encoded, the URI itself needs to be <a href=\"http://en.wikipedia.org/wiki/Percent-encoding\">URI encoded</a>. View the source of my last demo in the <a href=\"https://dbushell.com/demos/svg/utf8uri/test2.html\">test case</a> to see why this is ultimately pointless! The base64 version is always smaller.</p>\n<h2 id=\"object-elements\">Object Elements</h2>\n<p>If you were experimenting with SVG a couple of years ago like I was you’ll be more familiar with the object element:</p>\n<pre><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>object</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>image/svg+xml<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>image.svg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>fallback.png<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>object</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<p>This is the oldest method we have. And of course, data URIs are possible here too:</p>\n<pre><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>object</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>image/svg+xml<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>data:image/svg+xml;base64,[data]<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>fallback.png<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>object</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<p>If the browser doesn’t recognise the object element’s MIME type it won’t download the SVG file but the “fallback” image inside is always downloaded. Again, we’re not doing things quite right. There is a better solution and those crafty devils at <a href=\"http://clearleft.com/\">ClearLeft</a> are sporting it in their logo markup. The answer? Simply use CSS to apply the fallback image:</p>\n<pre><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>object</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>logo<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>image/svg+xml<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>logo.svg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>logo description<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>object</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<pre><code class=\"language-css\"><span class=\"token selector\">#logo div</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 300px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 50px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\">url(\"logo.png\")</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>The object element effectively replaces it’s default content with the SVG data. Only if the browser doesn’t support SVG does the element inside get styled. This to my knowledge is the best way to use SVG without any overhead.</p>\n<h2 id=\"inline-of-html\">Inline of HTML</h2>\n<p>With the methods highlighted above we actually lose a lot of SVG’s potential. For security reasons <a href=\"https://developer.mozilla.org/en-US/docs/SVG/SVG_as_an_Image\">SVG as an image</a> has scripting and external resource loading disabled in Firefox (and from my testing Webkit browsers follow suit).</p>\n<p>To unleash full power you either need to view an SVG file directly in the browser (not very handy for website development), or write it inline of HTML:</p>\n<pre><code class=\"language-markup\"><span class=\"token comment\">&lt;!--[if (gt IE 8)]>&lt;!--></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&lt;!--&lt;![endif]--></span>\n</code></pre>\n<p>This is something I’ve <a href=\"https://dbushell.com/2013/01/28/gloople-responsive-design-review/\">recently experimented</a> with to reduce HTTP requests. One drawback is that the browser can’t cache the image to be used across multiple locations. It does however mean you can <a href=\"https://developer.mozilla.org/en-US/docs/CSS/Getting_Started/SVG_and_CSS\">style SVG with CSS</a> — and via the document stylesheet too which is a maintainability bonus.</p>\n<p>Browsers that don’t support inline SVG aren’t going to like the taste of it (hence the conditional comments for old IE). In my use case, an object element with a data URI may have been the better choice.</p>\n<h2 id=\"the-holy-grail\">The Holy Grail</h2>\n<p>There is one technique where SVG will shine in future. That’s the use of <a href=\"http://www.w3.org/TR/SVG/linking.html#LinksIntoSVG\">fragment identifiers</a> — <strong>Peter Gasston</strong> has a friendlier explanation in his article: <a href=\"http://www.broken-links.com/2012/08/14/better-svg-sprites-with-fragment-identifiers/\">Better SVG Sprites With Fragment Identifiers</a>, as does <strong>Simurai</strong>: <a href=\"http://simurai.com/post/20251013889/svg-stacks\">SVG Stacks</a>. Firefox and IE10 are leading the charge here (<a href=\"http://caniuse.com/svg-fragment\">compatibility table</a>).</p>\n<p>Finally, when experimenting with SVG you’ll find a few browsers get a bit rasterisation-happy and that lovely resolution independence is destroyed. But fear not these bugs are getting ironed out quicker than you can find them! But if you do notice peculiarities, make sure to file a UFO sighting with the authorities.</p>\n<p>I hope that has served as a primer for front-end usage. The right technique really depends upon whether you’re SVG for UI elements or simply illustrative purposes.</p>\n<p>Protip: you can also minify SVG — <a href=\"https://github.com/svg/svgo\">SVG Optimzer</a> is a great tool.</p>\n<p>Pro-protip: <strong>Scott Jehl’s</strong> <a href=\"https://github.com/filamentgroup/grunticon\">grunticon</a> automagically converts SVG files to PNG and data URIs.</p>\n<p class=\"p--small\">That triangle points top-left. I would also have accepted north-west.</p>\n\n",
  "pageExcerpt": "Using SVG (Scalable Vector Graphics) on websites is a lot safer than many front-end developers think. Authoring aside — I wouldn’t suggest trying to hand-code an illustration more complex than a triangle* — the standard is well supported in browsers today and perfect for resolution independence when CSS and icon fonts aren’t suitable.\n* Quick fire […]",
  "pageTitle": "A Primer to Front-end SVG Hacking – David Bushell – Web Design (UK)"
}
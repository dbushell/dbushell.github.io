{
  "dateUnix": 1358289461000,
  "dateFormatted": "Tuesday 15 Jan 2013",
  "pageHeading": "Re: jQuery Animation vs CSS",
  "pagePath": "/2013/01/15/re-jquery-animation-vs-css/",
  "innerHTML": "<p>In response to my <strong>Smashing Magazine</strong> article on <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://coding.smashingmagazine.com/2013/01/15/off-canvas-navigation-for-responsive-website/\">implementing off-canvas navigation</a> I received a great <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://coding.smashingmagazine.com/2013/01/15/off-canvas-navigation-for-responsive-website/#comment-628183\">comment by Michael Benin</a>:</p>\n<blockquote>\n<p><a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/benbarnett/jQuery-Animate-Enhanced\">https://github.com/benbarnett/jQuery-Animate-Enhanced</a></p>\n<p><a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/gnarf37/jquery-requestAnimationFrame\">https://github.com/gnarf37/jquery-requestAnimationFrame</a></p>\n<p>Dropping in these two plugins should achieve what is accomplished in this article using CSS, and furthermore will utilize RAF. It would be interesting for you to run the same tests against JS/jQuery with these jQuery plugins.</p>\n</blockquote>\n<p>I agreed that these plugins would speed up my <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://dbushell.github.com/Responsive-Off-Canvas-Menu/step3-jquery.html\">jQuery demo</a> but they would never overtake the speed of my <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://dbushell.github.com/Responsive-Off-Canvas-Menu/step4.html\">CSS demo</a> — and that’s ignoring the extra overhead and complexity.</p>\n<p>The proof is in testing so let’s see both in action:</p>\n<h2 id=\"jquery-animate-enhanced\">jQuery Animate Enhanced</h2>\n<p><a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/benbarnett/jQuery-Animate-Enhanced\">jquery.animate-enhanced</a> detects CSS transitions and automatically converts your jQuery animation. Basically in theory it’s an invisible plug-and-play deal; a quick win. In practice the animation performance is obviously improved, but there are a few issues:</p>\n<p class=\"b-post__image\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==\" data-lazy=\"false\" data-src=\"/images/2013/01/jquery-enhanced-html.png\" alt=\"jQuery Enhanced DOM\"></p>\n<ol>\n<li>Like my <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://dbushell.github.com/Responsive-Off-Canvas-Menu/step3-jquery.html\">jQuery demo</a> inline styles are left over in the DOM.</li>\n<li>Likewise, styles are defined within a JavaScript file away from our main CSS.</li>\n<li>This particular plugin has a <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/benbarnett/jQuery-Animate-Enhanced/issues/102\">bug</a> — or lacks support — for percentages. That means I have to calculate <code>$(&#39;#nav&#39;).width()</code> on the fly.</li>\n<li>It causes animation flickering for the reasons highlighted at the end of <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://coding.smashingmagazine.com/2013/01/15/off-canvas-navigation-for-responsive-website/\">my article</a>.</li>\n</ol>\n<p><strong><a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://dbushell.github.com/Responsive-Off-Canvas-Menu/extras/step3-jquery-enhanced.html\">jQuery Enhanced Demo</a></strong></p>\n<p>Issues aside, this plugin basically achieves something close to my final demo (and in fairness, the last two issues could be fixed). However, for the price of jQuery and a plugin — and the first two issues — it’s ultimately needless complexity. Do consider this plugin though if you want to retro-fit existing builds.</p>\n<h3 id=\"jquery-enhanced-timeline\">jQuery Enhanced timeline</h3>\n<p class=\"b-post__image\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==\" data-lazy=\"false\" data-src=\"/images/2013/01/extras-jquery-enhanced.png\" alt=\"jQuery Enhanced demo timeline\"></p>\n<h3 id=\"timeline-for-my-final-demo\">timeline for my final demo</h3>\n<p>[<p class=\"b-post__image\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==\" data-lazy=\"false\" data-src=\"/images/2013/01/extras-css.png\" alt=\"CSS timeline\"></p>\n</p>\n<h2 id=\"jquery-requestanimationframe\">jQuery requestAnimationFrame</h2>\n<p>jQuery animation uses a sequence of timeouts to trigger each frame. These timeouts are completely ignorant of the browser’s ability to actually render changes in a timely manner. Modern browsers implement <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame\">requestAnimationFrame</a> which is far more intelligent.</p>\n<p><strong><a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://dbushell.github.com/Responsive-Off-Canvas-Menu/extras/step3-jquery-animation-frame.html\">jQuery requestAnimationFrame Demo</a></strong></p>\n<p>Testing this on my Galaxy Nexus shows no noticeable improvement over the basic <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://dbushell.github.com/Responsive-Off-Canvas-Menu/step3-jquery.html\">jQuery demo</a>. Animation is still very slow and stuttering.</p>\n<h3 id=\"jquery-animate-timeline\">jQuery animate timeline</h3>\n<p class=\"b-post__image\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==\" data-lazy=\"false\" data-src=\"/images/2013/01/extras-jquery.png\" alt=\"jQuery animate timeline\"></p>\n<h3 id=\"jquery-requestanimationframe-timeline\">jQuery requestAnimationFrame timeline</h3>\n<p class=\"b-post__image\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==\" data-lazy=\"false\" data-src=\"/images/2013/01/extras-jquery-animation-frame.png\" alt=\"jQuery requestAnimationFrame demo timeline\"></p>\n<p>The problem is that regardless of the benefits of requestAnimationFrame, we’re still iterating rapidly over an inline style property and the browser just isn’t fast enough to calculate the reflow. At the end of the day, you really don’t want to be manipulation DOM elements at such speed. requestAnimationFrame is very useful for the likes of canvas animation, but not here.</p>\n<h2 id=\"final-thoughts\">Final Thoughts</h2>\n<p>In case you’re wondering, we can’t combine <em>both</em> plugins because as soon as CSS transitions are used there is no frame management done by JavaScript.</p>\n<p>Finally, my solution keeps all style declarations within one stylesheet — maintainability is a big bonus. Very minimal JavaScript is required to interpret interaction and toggle state classes. Keep it simple — you can rarely improve performance by throwing more JavaScript at it!</p>\n",
  "pageExcerpt": "In response to my Smashing Magazine article on implementing off-canvas navigation I received a great comment by Michael Benin:\n\nhttps://github.com/benbarnett/jQuery-Animate-Enhanced\nhttps://github.com/gnarf37/jquery-requestAnimationFrame\nDropping in these two plugins should achieve what is accomplished in this article using CSS, and furthermore will utilize RAF. It would be interesting for you to run the same tests against JS/jQuery with these jQuery plugins.\n\nI […]",
  "pageTitle": "Re: jQuery Animation vs CSS – David Bushell – Web Design (UK)"
}
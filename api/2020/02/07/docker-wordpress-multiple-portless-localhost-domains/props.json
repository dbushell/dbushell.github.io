{
  "dateUnix": 1581069600000,
  "dateFormatted": "Friday 7 Feb 2020",
  "pageHeading": "Docker, WordPress, and Portless Domains for Local Development",
  "pagePath": "/2020/02/07/docker-wordpress-multiple-portless-localhost-domains/",
  "innerHTML": "<p>The <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://www.docker.com/\">Docker</a> life chooses you. I bet a lot of developers have had a similar experience. You‚Äôre brought onto a project and it‚Äôs like; ‚Äú<em>Hey we‚Äôre using Docker, just run docker-compose up.</em>‚Äú they say, ‚Äú<em>Sure, I know Docker,</em>‚Äú you shrug. Then you spend the better part of the week debugging.</p>\n<p>I‚Äôve worked on maybe two dozen sites with the help of Docker over the years. The majority of them WordPress. The configuration file I‚Äôve been using has evolved from a complete mystery that I stole from the experience above, to something I‚Äôve been able to tweak after ‚Äòlearning‚Äô Docker on the job.</p>\n<p>A couple of pain points have remained:</p>\n<ol>\n<li>Localhost domain and port management</li>\n<li>The initial WordPress install</li>\n</ol>\n<p>That first point is especially annoying. You can only have one container on localhost port 80. So you end up with:</p>\n<pre><code>my-blog.localhost:8081\nacme-corp.localhost:8082\n127.0.0.1:8090\nvaporware.localhost:9000</code></pre><p>Port juggling sucks. Even after avoiding conflicts, having to remember the port number diminishes the value of a custom domain. The solution is a reverse proxy. This can be achieved with <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://docs.traefik.io/\">Traefik</a>, which I could not figure out, or <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://www.nginx.com/\">NGINX</a>, which I did; <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/jwilder/nginx-proxy/\">nginx-proxy</a> by <em>Jason Wilder</em> works like magic.</p>\n<p>After finding a happy solution I went back to update older projects. Rather than continuing to maintain what are effectively identical config files, I‚Äôve bundled a set of reusable templates and scripts into an NPM package.</p>\n<h2 id=\"docker-wordpress-scripts\">Docker WordPress Scripts</h2>\n<p>I‚Äôve started a small project to help manage WordPress containers in Docker. Have a peek at <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/dbushell/docker-wordpress-scripts\">Docker WordPress Scripts on GitHub</a>.</p>\n<p class=\"b-post__image\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==\" data-lazy=\"false\" data-src=\"/images/blog/2020/dws-logo.svg\" alt=\"Docker WordPress Scripts\"></p>\n<p>DWS helps manage:</p>\n<ul>\n<li>A reusable <code>docker-compose.yml</code> template (WordPress, MariaDB, phpMyAdmin)</li>\n<li>A single instance of NGINX and <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://www.portainer.io/\">Portainer</a> with config files</li>\n<li>WordPress CLI installation and set up</li>\n<li>PHP config files</li>\n</ul>\n<p>When I start a new WordPress project I can just run:</p>\n<pre><code>$ dws up\n\nüêπ Success: WordPress is up and running!\nphpMyAdmin: ‚ûú http://pma.wpdemo.localhost\nWordPress:  ‚ûú http://wpdemo.localhost</code></pre><p>It will spin up new containers for my project and I‚Äôm good to go.</p>\n<p>The scripts are mostly wrappers for the <code>docker-compose</code> command. I no longer need to maintain any config files in individual project repositories. But if I wanted to later, I can run <code>dws eject</code>. This copies everything to the project and moves WordPress back to <code>localhost:8080</code> like my old set up.</p>\n<h3 id=\"work-in-progress\">Work in Progress</h3>\n<p>This is somewhat of a personal project but it solves a fairly common problem so I‚Äôm sharing it for others to use and adapt. It‚Äôs lacking in error feedback and I can‚Äôt provide support but <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://twitter.com/dbushell\">@ me</a> in case I have a quick answer. I‚Äôll continue to improve DWS as I work with it in the coming months.</p>\n<p>If you want to set up a reverse proxy without the help of DWS take a look at the <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/dbushell/docker-wordpress-scripts/tree/master/config\">compose files in this directory</a>.</p>\n<p>You can find more extensive <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/dbushell/docker-wordpress-scripts/blob/master/README.md\">documentation on GitHub</a>.</p>\n<style>\n.b-post [src$=\"dws-logo.svg\"] {\n  background: #fff;\n  padding: 1.5rem;\n  width: 300px;\n}\n</style>\n",
  "pageExcerpt": "The Docker life chooses you. I bet a lot of developers have had a similar experience. You‚Äôre brought onto a project and it‚Äôs like; ‚ÄúHey we‚Äôre using Docker, just run docker-compose up.‚Äú they say, ‚ÄúSure, I know Docker,‚Äú you shrug. Then you spend the better part of the week debugging.\nI‚Äôve worked on maybe two dozen [‚Ä¶]",
  "pageDesc": "The one where I share a project to manage WordPress containers in Docker.",
  "pageTitle": "Docker, WordPress, and Portless Domains for Local Development ‚Äì David Bushell ‚Äì Web Design (UK)"
}
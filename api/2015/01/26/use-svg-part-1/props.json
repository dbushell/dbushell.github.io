{
  "dateUnix": 1422279504000,
  "dateFormatted": "Monday 26 Jan 2015",
  "pageHeading": "Use SVG (part 1)",
  "pagePath": "/2015/01/26/use-svg-part-1/",
  "innerHTML": "<p>As you know I’m a big fan of using SVG whenever possible.</p>\n<p class=\"p--small p--light\">See my articles <a href=\"http://www.smashingmagazine.com/2012/01/16/resolution-independence-with-svg/\">‘Resolution Independence With SVG’</a> (Jan 2012) and <a href=\"http://dbushell.com/2013/02/04/a-primer-to-front-end-svg-hacking/\">‘A Primer to Front-end SVG Hacking’</a> (Feb 2013) for a retrospective.</p>\n\n<p>I’m always looking for the most viable technique; browser support is always changing and content management is an oft-forgotten requirement (or ‘restriction’, depending how you look at it).</p>\n<p>When building a front-end I split graphical assets into two categories:</p>\n<ol>\n<li>“content” — images that’ll change in relation to the content (likely via a CMS)</li>\n<li>“UI” — anything that’s integral to the website design</li>\n</ol>\n<p>Naming isn’t important, recognising different use cases is. We could sprite up UI icons, maybe even embed them within stylesheets — in <em>Part 2</em> I’ll look at these techniques — but using images inside content realistically requires individual files. That’s the reality / state of CMS today.</p>\n<h2 id=\"the-content-img\">The content <code>&lt;img&gt;</code></h2>\n<p>For individual “content” images there’s no better alternative than a good ol’ fashioned <code>&lt;img&gt;</code> element. It’ll work<sup>*</sup> with both SVG and raster sources (PNG, JPEG, etc) — whatever the website owner uploads.</p>\n<p class=\"p--small p--light\">* providing the server and CMS whitelist the MIME type: <code>image/svg+xml</code> (a common oversight)</p>\n\n<p>In my opinion <a href=\"http://caniuse.com/#feat=svg\">browser support</a> is good enough today that an SVG fallback isn’t required.</p>\n<p><strong>However!</strong></p>\n<p>With responsive design, Internet Explorer doesn’t scale the <code>&lt;img&gt;</code> as one might expect when using SVG. Let’s use this common pattern as an example:</p>\n<pre><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>article</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>media<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>media__image<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>smile.svg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Smiley<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>media__body<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>strong</span><span class=\"token punctuation\">></span></span>Media object with SVG image.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>strong</span><span class=\"token punctuation\">></span></span> … <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>article</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<pre><code class=\"language-css\"><span class=\"token selector\">.media__image</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> 20%<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Testing with both SVG and PNG assets reveals a problem unique to IE (as of today, all SVG supporting versions; 9–11):</p>\n<p class=\"b-post__image\"><img src=\"/images/2015/01/IE-svg-scaling.png\" alt=\"IE SVG scaling\"></p>\n\n<p>Usually, with responsive images, we can just set <code>max-width</code> in CSS and they will scale to fit (but no larger than the source). In IE this doesn’t work; the aspect ratio is not respected (screenshot above).</p>\n<p>We need to explicitly set a <code>width</code> on the image. In this case:</p>\n<pre><code class=\"language-css\"><span class=\"token selector\">.media__image</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 20%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> 300px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Or, we could explicitly set a global default and use a <code>max-width</code> on a parent element (requiring extra markup):</p>\n<pre><code class=\"language-css\"><span class=\"token selector\">img</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.media__image</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> 20%<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<pre><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>article</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>media<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>media__image<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>smile.svg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Smiley<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>media__body<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>strong</span><span class=\"token punctuation\">></span></span>Media object with SVG image.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>strong</span><span class=\"token punctuation\">></span></span> … <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>article</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<p>The same idea applies when floating an image to allow text to wrap around:</p>\n<p class=\"b-post__image\"><img src=\"/images/2015/01/IE-svg-float.png\" alt=\"IE SVG Float\"></p>\n\n\n\n<pre><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>article</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>prose<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>smile.svg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>prose__image<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>strong</span><span class=\"token punctuation\">></span></span>Media object with SVG image.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>strong</span><span class=\"token punctuation\">></span></span> … <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>article</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<p>Ideally all we need to use is <code>.prose__image { max-width: 20%; }</code> and the image will scale to these conditions:</p>\n<ul>\n<li>no wider than 20% of the parent element</li>\n<li>no wider than the source image width (300px)</li>\n</ul>\n<p>However, to avoid the IE aspect ratio distortion, you’ll either have to explicitly set a width — <code>.prose__image { width: 20%; }</code> — or define a global <code>&lt;img&gt;</code> width of 100% and use <code>max-width</code> here. This unfortunately means the second point is no longer met by any browser. An additional parent element would be required like our media object example above. This may be difficult if the image is embedded inside a CMS WYSIWYG — ew! but that’s a bigger problem…</p>\n<h2 id=\"in-conclusion\">In conclusion</h2>\n<p>So the lesson here is that if you want your “content” images to be responsive and support both SVG and raster image formats — and why wouldn’t you? — it’s not good enough to simply provide an <code>&lt;img&gt;</code> element in the templates. It needs an explicit width, and probably a wrapping element for full control.</p>\n<p>Sounds simply, but if you’ve never used / tested SVG images before in IE this “bug” can be a real nuisance.  If you want to test for yourself I’ve upload the SVG scaling: <a href=\"http://dbushell.com/demos/svg/2015-01-26/svg-scale-problem.html\">problem</a>, <a href=\"http://dbushell.com/demos/svg/2015-01-26/svg-scale-solution.html\">solution</a>, and <a href=\"http://dbushell.com/demos/svg/2015-01-26/svg-float.html\">float</a> demos.</p>\n<p>In <em>Part 2</em> of this article I’ll look at SVG techniques for the “UI” use case.</p>\n<p>That’s when the fun begins!</p>\n",
  "pageExcerpt": "As you know I’m a big fan of using SVG whenever possible.\nSee my articles ‘Resolution Independence With SVG’ (Jan 2012) and ‘A Primer to Front-end SVG Hacking’ (Feb 2013) for a retrospective.\n\nI’m always looking for the most viable technique; browser support is always changing and content management is an oft-forgotten requirement (or ‘restriction’, depending how […]",
  "pageTitle": "Use SVG (part 1) – David Bushell – Web Design (UK)"
}
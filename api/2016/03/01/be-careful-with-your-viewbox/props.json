{
  "dateUnix": 1456826400000,
  "dateFormatted": "Tuesday 1 Mar 2016",
  "pageHeading": "Be careful with your viewBox",
  "pagePath": "/2016/03/01/be-careful-with-your-viewbox/",
  "innerHTML": "<p>In Sara Soueidan’s article: <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://sarasoueidan.com/blog/svg-style-inheritance-and-FOUSVG/\">SVG Style Inheritance and the ‘Flash of Unstyled SVG’</a>, Sara explains the importance of having <code>width</code>, <code>height</code>, and <code>viewBox</code> attributes on SVG elements. This reminded me of two issues I ran into last week building my <a href=\"/2016/02/29/a-bit-of-a-new-look/\">new design</a>.</p>\n<p>I have an SVG sprite for social icons:</p>\n<div class=\"b-boxed social\">\n  <style scoped>\n  .svg-icon  { display: inline-block; vertical-align: top; margin: 0 2px; width: 42px; height: 42px; fill: #ff6680; }\n  </style>\n  <svg class=\"svg-icon\" role=\"presentation\">\n    <use xlink:href=\"/assets/img/icons.svg#twitter\"></use>\n  </svg>\n  <svg class=\"svg-icon\" role=\"presentation\">\n    <use xlink:href=\"/assets/img/icons.svg#github\"></use>\n  </svg>\n  <svg class=\"svg-icon\" role=\"presentation\">\n    <use xlink:href=\"/assets/img/icons.svg#codepen\"></use>\n  </svg>\n</div>\n\n<p>These three icons live within a single file (see Sara’s guide to <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://24ways.org/2014/an-overview-of-svg-sprite-creation-techniques/\">SVG sprites</a>). To reused an icon is as simple as referencing it like so:</p>\n<pre><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>use</span> <span class=\"token attr-name\"><span class=\"token namespace\">xlink:</span>href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>icons.svg#twitter<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>use</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>With CSS I can style the size and colour of individual icons, amongst other properties. At least that is the basic principle. Of course, when your asset pipeline is a mess of custom node scripts, what’s eventually rendered in the browser can be a delightful surprise.</p>\n<p><strong>My icons weren’t displaying at all.</strong></p>\n<p>I checked my SVG sprite source and it looked correct:</p>\n<pre><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2000/svg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>symbol</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>twitter<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">viewbox</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0 0 34 28<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token comment\">&lt;!-- [path data] --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>symbol</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>symbol</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>github<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">viewbox</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0 0 28 28<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token comment\">&lt;!-- [path data] --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>symbol</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>symbol</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>codepen<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">viewbox</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0 0 28 28<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token comment\">&lt;!-- [path data] --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>symbol</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>I checked my minified SVG sprite source and it looked suspiciously empty:</p>\n<pre><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2000/svg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>If you’re using a minifying tool based on <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/svg/svgo\">SVGO</a> you need to disable a couple of plugins (‘cleanupIDs’ and ‘removeViewBox’). This will ensure the <code>&lt;symbol&gt;</code> elements are not removed from your sprite.</p>\n<p>That fixed, I refreshed to find my icons were now visible but not scaling correctly. Regardless of what CSS <code>width</code> or <code>height</code> values I set they refused to listen. After a brief spell of bewilderment I realised that my minified sprite was still missing the <code>viewBox</code> attributes on each <code>&lt;symbol&gt;</code>. Browsers will not scale SVG without this attribute.</p>\n<p>Why was it being removed? That’s because — and this took me an embarrassingly long time to notice — my <code>viewbox</code> attributes were lower-case. From testing it seems browsers don’t actually care but SVGO is case-sensitive in this scenario. Not recognising the lower-case <code>viewbox</code> it was being removed.</p>\n<p>I’ve uploaded an example on <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"http://codepen.io/dbushell/pen/EKaRaV/\">CodePen</a> to demonstrate:</p>\n<div class=\"b-post__image\">\n  <iframe height=\"268\" scrolling=\"no\" title=\"SVG icon sprite test case\" src=\"//codepen.io/dbushell/embed/EKaRaV/?height=150&theme-id=0&default-tab=result&embed-version=2\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\">See the Pen <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://codepen.io/dbushell/pen/EKaRaV/\">SVG icon sprite test case</a> by David Bushell (<a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://codepen.io/dbushell\">@dbushell</a>) on <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://codepen.io\">CodePen</a>.</iframe>\n</div>\n\n<p>I suppose I’ve learnt two important lessons here:</p>\n<ul>\n<li>Never remove the <code>viewBox</code></li>\n<li>Beware of meddling tools that do!</li>\n</ul>\n<p>It’s funny how long front-end problems can take to debug. I sat there comparing my website to a previous one I’d built playing spot-the-difference for the longest time. The solution was no more than a capital “B”.</p>\n",
  "pageExcerpt": "In Sara Soueidan’s article: SVG Style Inheritance and the ‘Flash of Unstyled SVG’, Sara explains the importance of having width, height, and viewBox attributes on SVG elements. This reminded me of two issues I ran into last week building my new design.\nI have an SVG sprite for social icons:\n\n  \n  .svg-icon  { […]",
  "pageTitle": "Be careful with your viewBox – David Bushell – Web Design (UK)"
}
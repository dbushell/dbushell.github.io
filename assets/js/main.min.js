if(/dbushell\.com/.test(window.location.hostname)){var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-9497100-1"]);_gaq.push(["_setDomainName","dbushell.com"]);_gaq.push(["_trackPageview"]);(function(){var ga=document.createElement("script");ga.type="text/javascript";ga.async=true;ga.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga,s)})()}(function(window,document,undefined){var _now=Date.now||function(){return(new Date).getTime()};var _throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(typeof options!=="object"){options={}}var later=function(){previous=options.leading===false?0:_now();timeout=null;result=func.apply(context,args);context=args=null};return function(){var now=_now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args);context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}};window.dbushell=function(){var _init=0,app=window.dbushell||{};var $win=window,$docEl=document.documentElement;var _scrollers=[];if(app.isFF||app.isIE&&!app.isOldIE){window.loadScript("/assets/js/vendor/iscroll.min.js",function(){window.dbushell.iscroll()})}app.iscroll=function(){if(!window.IScroll||!_init){return}var $footer=document.getElementById("footer");$footer.style.overflow="hidden";var options={mouseWheel:true,scrollbars:true,disableMouse:true,interactiveScrollbars:true,fadeScrollbars:true};var scroller=new window.IScroll($footer,options);_scrollers.push(scroller);var resize=function(){var position=window.getComputedStyle($footer,null).getPropertyValue("position");if(position==="fixed"){scroller.enable()}else{scroller.disable()}};setTimeout(resize,0);window.addEventListener("resize",_throttle(resize,300),false)};app.nav=function(){if(!$docEl.querySelector||!$docEl.classList)return;var $nav=$docEl.querySelector(".nav"),$navList=$nav.querySelector(".nav__list[data-root]");if(!$navList)return;var $navItems,$navMoreItem=$navList.querySelector(".nav__item--more"),$navMoreList=$navMoreItem.querySelector(".nav__list");var headroom=new Headroom($nav,{offset:35});headroom.init();var navListStyle=window.getComputedStyle($navList,null),navListPadding=parseInt(navListStyle.paddingLeft,10)+parseInt(navListStyle.paddingRight,10);$navMoreItem.children[0].addEventListener("click",function(e){e.preventDefault();if($navMoreList.classList.contains("nav__dropdown--active")){$navMoreList.classList.remove("nav__dropdown--active");$navMoreList.classList.remove("nav__dropdown--hover")}else{$navMoreList.classList.add("nav__dropdown--active")}},false);$navMoreItem.addEventListener("mouseenter",function(e){$navMoreList.classList.add("nav__dropdown--hover")},false);$navMoreItem.addEventListener("mouseleave",function(e){$navMoreList.classList.remove("nav__dropdown--hover")},false);function getData(el,attr){return el?el.dataset?el.dataset[attr]:el.getAttribute("data-"+attr):null}function setData(el,attr,value){return el?el.dataset?el.dataset[attr]=value:el.setAttribute("data-"+attr,value):null}function sortBy(arr,attr){return arr.sort(function(a,b){var ap=parseInt(getData(a,attr)||100),bp=parseInt(getData(b,attr)||100);return ap-bp})}var updateLoop=0;function update(){if(updateLoop++<50){$navMoreList.classList.remove("nav__dropdown--active");$navMoreList.classList.remove("nav__dropdown--hover");$nav.classList.remove("nav--flex");$navItems=[].slice.call($nav.querySelectorAll(".nav__list[data-root] > .nav__item:not(.nav__item--more)"));sortBy($navItems,"priority");$navMoreItem.style.display="block";var more_width=$navMoreItem.offsetWidth,free_width=0,nav_width=0;$navItems.forEach(function($item){nav_width+=$item.offsetWidth});free_width=$navList.offsetWidth-navListPadding-more_width;if(nav_width>free_width){var $last=$navItems[$navItems.length-1];setData($last,"width",$last.offsetWidth);if($navMoreList.children.length){$navMoreList.insertBefore($last,$navMoreList.children[0])}else{$navMoreList.appendChild($last)}return update()}else{if($navMoreList.children.length){var $first=$navMoreList.children[0];if($navMoreList.children.length===1){}if(nav_width+parseInt(getData($first,"width"),10)<free_width){$navItems.push($first);sortBy($navItems,"order");$navItems.forEach(function($item){$navList.appendChild($item)});$navList.appendChild($navMoreItem);return update()}}}$nav.classList.add("nav--flex")}else{}updateLoop=0;$navMoreItem.style.display=$navMoreList.children.length?"block":"none"}window.addEventListener("load",_throttle(update,50),false);window.addEventListener("resize",_throttle(update,50),false);window.addEventListener("orientationchange",_throttle(update,50),false)},app.init=function(){if(_init++){return}app.nav();app.iscroll();if(app.isIE){loadScript("/assets/js/vendor/svgxuse.min.js")}return app};return app}()})(window,window.document);!function(a,b){"use strict";function c(a){this.callback=a,this.ticking=!1}function d(b){return b&&"undefined"!=typeof a&&(b===a||b.nodeType)}function e(a){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var b,c,f=a||{};for(c=1;c<arguments.length;c++){var g=arguments[c]||{};for(b in g)f[b]="object"!=typeof f[b]||d(f[b])?f[b]||g[b]:e(f[b],g[b])}return f}function f(a){return a===Object(a)?a:{down:a,up:a}}function g(a,b){b=e(b,g.options),this.lastKnownScrollY=0,this.elem=a,this.debouncer=new c(this.update.bind(this)),this.tolerance=f(b.tolerance),this.classes=b.classes,this.offset=b.offset,this.scroller=b.scroller,this.initialised=!1,this.onPin=b.onPin,this.onUnpin=b.onUnpin,this.onTop=b.onTop,this.onNotTop=b.onNotTop}var h={bind:!!function(){}.bind,classList:"classList"in b.documentElement,rAF:!!(a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame)};a.requestAnimationFrame=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame,c.prototype={constructor:c,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},g.prototype={constructor:g,init:function(){return g.cutsTheMustard?(this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this):void 0},destroy:function(){var a=this.classes;this.initialised=!1,this.elem.classList.remove(a.unpinned,a.pinned,a.top,a.initial),this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var a=this.elem.classList,b=this.classes;(a.contains(b.pinned)||!a.contains(b.unpinned))&&(a.add(b.unpinned),a.remove(b.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var a=this.elem.classList,b=this.classes;a.contains(b.unpinned)&&(a.remove(b.unpinned),a.add(b.pinned),this.onPin&&this.onPin.call(this))},top:function(){var a=this.elem.classList,b=this.classes;a.contains(b.top)||(a.add(b.top),a.remove(b.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var a=this.elem.classList,b=this.classes;a.contains(b.notTop)||(a.add(b.notTop),a.remove(b.top),this.onNotTop&&this.onNotTop.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(b.documentElement||b.body.parentNode||b.body).scrollTop},getViewportHeight:function(){return a.innerHeight||b.documentElement.clientHeight||b.body.clientHeight},getDocumentHeight:function(){var a=b.body,c=b.documentElement;return Math.max(a.scrollHeight,c.scrollHeight,a.offsetHeight,c.offsetHeight,a.clientHeight,c.clientHeight)},getElementHeight:function(a){return Math.max(a.scrollHeight,a.offsetHeight,a.clientHeight)},getScrollerHeight:function(){return this.scroller===a||this.scroller===b.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(a){var b=0>a,c=a+this.getViewportHeight()>this.getScrollerHeight();return b||c},toleranceExceeded:function(a,b){return Math.abs(a-this.lastKnownScrollY)>=this.tolerance[b]},shouldUnpin:function(a,b){var c=a>this.lastKnownScrollY,d=a>=this.offset;return c&&d&&b},shouldPin:function(a,b){var c=a<this.lastKnownScrollY,d=a<=this.offset;return c&&b||d},update:function(){var a=this.getScrollY(),b=a>this.lastKnownScrollY?"down":"up",c=this.toleranceExceeded(a,b);this.isOutOfBounds(a)||(a<=this.offset?this.top():this.notTop(),this.shouldUnpin(a,c)?this.unpin():this.shouldPin(a,c)&&this.pin(),this.lastKnownScrollY=a)}},g.options={tolerance:{up:0,down:0},offset:0,scroller:a,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",initial:"headroom"}},g.cutsTheMustard="undefined"!=typeof h&&h.rAF&&h.bind&&h.classList,a.Headroom=g}(window,document);(function(window,document,undefined){if(!document.querySelectorAll||!Array.prototype.forEach)return;var videos=[],selectors=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];selectors.forEach(function(selector,i){var el=document.querySelectorAll(selector);if(el.length){Array.prototype.push.apply(videos,Array.prototype.slice.call(el))}});if(!videos.length)return;if(!document.getElementById("fit-vids-style")){var head=document.head||document.getElementsByTagName("head")[0];var css=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}";var div=document.createElement("div");div.innerHTML='<p>x</p><style id="fit-vids-style">'+css+"</style>";head.appendChild(div.childNodes[1])}videos.forEach(function(video,i){var parent=video.parentNode,wrapper,height,width,ratio;if(video.tagName.toLowerCase()==="embed"&&parent.tagName.toLowerCase()==="object")return;if(parent.className.indexOf("fluid-width-video-wrapper")>-1)return;height=parseInt(video.getAttribute("height"),10);width=parseInt(video.getAttribute("width"),10);if(isNaN(height)||isNaN(width)){height=9;width=16}ratio=height/width;wrapper=document.createElement("div");wrapper.className="fluid-width-video-wrapper";wrapper.setAttribute("style","padding-top: "+ratio*100+"%");parent.insertBefore(wrapper,video);wrapper.appendChild(video);video.removeAttribute("height");video.removeAttribute("width")})})(window,window.document);
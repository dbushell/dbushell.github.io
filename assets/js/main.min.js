/*!
 * Copyright (c) David Bushell | @dbushell | http://dbushell.com
 */
if(/dbushell\.com/.test(window.location.hostname)){var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-9497100-1"]),_gaq.push(["_setDomainName","dbushell.com"]),_gaq.push(["_trackPageview"]),function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}()}!function(a,b,c){var d=Date.now||function(){return(new Date).getTime()},e=function(a,b,c){var e,f,g,h=null,i=0;"object"!=typeof c&&(c={});var j=function(){i=c.leading===!1?0:d(),h=null,g=a.apply(e,f),e=f=null};return function(){var k=d();i||c.leading!==!1||(i=k);var l=b-(k-i);return e=this,f=arguments,l<=0||l>b?(clearTimeout(h),h=null,i=k,g=a.apply(e,f),e=f=null):h||c.trailing===!1||(h=setTimeout(j,l)),g}};a.dbushell=function(){var c=0,d=a.dbushell||{},f=b.documentElement,g=[];return(d.isFF||d.isIE&&!d.isOldIE)&&a.loadScript("/assets/js/vendor/iscroll.min.js",function(){a.dbushell.iscroll()}),d.iscroll=function(){if(a.IScroll&&c){var d=b.getElementById("footer");d.style.overflow="hidden";var f={mouseWheel:!0,scrollbars:!0,disableMouse:!0,interactiveScrollbars:!0,fadeScrollbars:!0},h=new a.IScroll(d,f);g.push(h);var i=function(){var b=a.getComputedStyle(d,null).getPropertyValue("position");"fixed"===b?h.enable():h.disable()};setTimeout(i,0),a.addEventListener("resize",e(i,300),!1)}},d.nav=function(){function b(a,b){return a?a.dataset?a.dataset[b]:a.getAttribute("data-"+b):null}function c(a,b,c){return a?a.dataset?a.dataset[b]=c:a.setAttribute("data-"+b,c):null}function d(a,c){return a.sort(function(a,d){var e=parseInt(b(a,c)||100),f=parseInt(b(d,c)||100);return e-f})}function g(){if(p++<50){l.classList.remove("nav__dropdown--active"),l.classList.remove("nav__dropdown--hover"),i.classList.remove("nav--flex"),h=[].slice.call(i.querySelectorAll(".nav__list[data-root] > .nav__item:not(.nav__item--more)")),d(h,"priority"),k.style.display="block";var a=k.offsetWidth,e=0,f=0;if(h.forEach(function(a){f+=a.offsetWidth}),e=j.offsetWidth-o-a,f>e){var m=h[h.length-1];return c(m,"width",m.offsetWidth),l.children.length?l.insertBefore(m,l.children[0]):l.appendChild(m),g()}if(l.children.length){var n=l.children[0];if(1===l.children.length,f+parseInt(b(n,"width"),10)<e)return h.push(n),d(h,"order"),h.forEach(function(a){j.appendChild(a)}),j.appendChild(k),g()}i.classList.add("nav--flex")}p=0,k.style.display=l.children.length?"block":"none"}if(f.querySelector&&f.classList){var h,i=f.querySelector(".nav"),j=i.querySelector(".nav__list[data-root]"),k=j.querySelector(".nav__item--more"),l=k.querySelector(".nav__list"),m=new Headroom(i,{offset:35});m.init();var n=a.getComputedStyle(j,null),o=parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10);k.children[0].addEventListener("click",function(a){a.preventDefault(),l.classList.contains("nav__dropdown--active")?(l.classList.remove("nav__dropdown--active"),l.classList.remove("nav__dropdown--hover")):l.classList.add("nav__dropdown--active")},!1),k.addEventListener("mouseenter",function(a){l.classList.add("nav__dropdown--hover")},!1),k.addEventListener("mouseleave",function(a){l.classList.remove("nav__dropdown--hover")},!1);var p=0;a.addEventListener("load",e(g,50),!1),a.addEventListener("resize",e(g,50),!1),a.addEventListener("orientationchange",e(g,50),!1)}},d.init=function(){if(!c++)return d.nav(),d.iscroll(),d.isIE&&loadScript("/assets/js/vendor/svgxuse.min.js"),d},d}()}(window,window.document),/*!
 * headroom.js v0.7.0 - Give your page some headroom. Hide your header until you need it
 * Copyright (c) 2014 Nick Williams - http://wicky.nillia.ms/headroom.js
 * License: MIT
 */
!function(a,b){"use strict";function c(a){this.callback=a,this.ticking=!1}function d(b){return b&&"undefined"!=typeof a&&(b===a||b.nodeType)}function e(a){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var b,c,f=a||{};for(c=1;c<arguments.length;c++){var g=arguments[c]||{};for(b in g)f[b]="object"!=typeof f[b]||d(f[b])?f[b]||g[b]:e(f[b],g[b])}return f}function f(a){return a===Object(a)?a:{down:a,up:a}}function g(a,b){b=e(b,g.options),this.lastKnownScrollY=0,this.elem=a,this.debouncer=new c(this.update.bind(this)),this.tolerance=f(b.tolerance),this.classes=b.classes,this.offset=b.offset,this.scroller=b.scroller,this.initialised=!1,this.onPin=b.onPin,this.onUnpin=b.onUnpin,this.onTop=b.onTop,this.onNotTop=b.onNotTop}var h={bind:!!function(){}.bind,classList:"classList"in b.documentElement,rAF:!!(a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame)};a.requestAnimationFrame=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame,c.prototype={constructor:c,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},g.prototype={constructor:g,init:function(){return g.cutsTheMustard?(this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this):void 0},destroy:function(){var a=this.classes;this.initialised=!1,this.elem.classList.remove(a.unpinned,a.pinned,a.top,a.initial),this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var a=this.elem.classList,b=this.classes;(a.contains(b.pinned)||!a.contains(b.unpinned))&&(a.add(b.unpinned),a.remove(b.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var a=this.elem.classList,b=this.classes;a.contains(b.unpinned)&&(a.remove(b.unpinned),a.add(b.pinned),this.onPin&&this.onPin.call(this))},top:function(){var a=this.elem.classList,b=this.classes;a.contains(b.top)||(a.add(b.top),a.remove(b.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var a=this.elem.classList,b=this.classes;a.contains(b.notTop)||(a.add(b.notTop),a.remove(b.top),this.onNotTop&&this.onNotTop.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(b.documentElement||b.body.parentNode||b.body).scrollTop},getViewportHeight:function(){return a.innerHeight||b.documentElement.clientHeight||b.body.clientHeight},getDocumentHeight:function(){var a=b.body,c=b.documentElement;return Math.max(a.scrollHeight,c.scrollHeight,a.offsetHeight,c.offsetHeight,a.clientHeight,c.clientHeight)},getElementHeight:function(a){return Math.max(a.scrollHeight,a.offsetHeight,a.clientHeight)},getScrollerHeight:function(){return this.scroller===a||this.scroller===b.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(a){var b=0>a,c=a+this.getViewportHeight()>this.getScrollerHeight();return b||c},toleranceExceeded:function(a,b){return Math.abs(a-this.lastKnownScrollY)>=this.tolerance[b]},shouldUnpin:function(a,b){var c=a>this.lastKnownScrollY,d=a>=this.offset;return c&&d&&b},shouldPin:function(a,b){var c=a<this.lastKnownScrollY,d=a<=this.offset;return c&&b||d},update:function(){var a=this.getScrollY(),b=a>this.lastKnownScrollY?"down":"up",c=this.toleranceExceeded(a,b);this.isOutOfBounds(a)||(a<=this.offset?this.top():this.notTop(),this.shouldUnpin(a,c)?this.unpin():this.shouldPin(a,c)&&this.pin(),this.lastKnownScrollY=a)}},g.options={tolerance:{up:0,down:0},offset:0,scroller:a,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",initial:"headroom"}},g.cutsTheMustard="undefined"!=typeof h&&h.rAF&&h.bind&&h.classList,a.Headroom=g}(window,document),/*!
 * based on FitVids | https://github.com/davatron5000/FitVids.js
 */
function(a,b,c){if(b.querySelectorAll&&Array.prototype.forEach){var d=[],e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];if(e.forEach(function(a,c){var e=b.querySelectorAll(a);e.length&&Array.prototype.push.apply(d,Array.prototype.slice.call(e))}),d.length){if(!b.getElementById("fit-vids-style")){var f=b.head||b.getElementsByTagName("head")[0],g=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}",h=b.createElement("div");h.innerHTML='<p>x</p><style id="fit-vids-style">'+g+"</style>",f.appendChild(h.childNodes[1])}d.forEach(function(a,c){var d,e,f,g,h=a.parentNode;"embed"===a.tagName.toLowerCase()&&"object"===h.tagName.toLowerCase()||h.className.indexOf("fluid-width-video-wrapper")>-1||(e=parseInt(a.getAttribute("height"),10),f=parseInt(a.getAttribute("width"),10),(isNaN(e)||isNaN(f))&&(e=9,f=16),g=e/f,d=b.createElement("div"),d.className="fluid-width-video-wrapper",d.setAttribute("style","padding-top: "+100*g+"%"),h.insertBefore(d,a),d.appendChild(a),a.removeAttribute("height"),a.removeAttribute("width"))})}}}(window,window.document);